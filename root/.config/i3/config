# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.

set $mod Mod1

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Inter Display 10
for_window [class=".*"] title_format "%title"

# Window options
title_align center
smart_borders on
workspace_layout default

default_border normal 1
default_floating_border normal 1

# Class                 border  backgr. text    indicator child_border
client.focused          #181818 #131313 #FFFFFF #FFFFFF   #181818
client.focused_inactive #181818 #131313 #FFFFFF #131313   #181818
client.unfocused        #181818 #131313 #686868 #131313   #181818
client.urgent           #161616 #801717 #FFFFFF #801717   #801717

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# Initialize X11 apps settings
exec_always --no-startup-id xsettingsd

# Initialize bar
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

# Set solid/image background
exec_always --no-startup-id xsetroot -solid "#282828"
# exec_always --no-startup-id feh --bg-fill "$HOME/filename.png"

# Hide cursor when typing
exec --no-startup-id xhidecursor

# Start clipboard manager
exec --no-startup-id clipmenud

# Start Brave browser at startup
exec --no-startup-id brave

# Lock screen after 20min, screen off after 25min, xss-lock handles suspend
exec --no-startup-id xautolock -time 20 -locker ~/.config/i3/lock.sh
exec --no-startup-id xset s 1400 1400
exec --no-startup-id xset dpms 0 0 1500
exec --no-startup-id xss-lock --transfer-sleep-lock -- ~/.config/i3/lock.sh

bindsym $mod+Shift+l exec ~/.config/i3/lock.sh

# Volume controls with notifications
bindsym XF86AudioRaiseVolume exec --no-startup-id "pamixer -i 5 && if pamixer --get-mute | grep -q 'true'; then dunstify -t 1000 -r 991049 -h int:value:$(pamixer --get-volume) 'Volume (Muted)'; else dunstify -t 1000 -r 991049 -h int:value:$(pamixer --get-volume) 'Volume'; fi"
bindsym XF86AudioLowerVolume exec --no-startup-id "pamixer -d 5 && if pamixer --get-mute | grep -q 'true'; then dunstify -t 1000 -r 991049 -h int:value:$(pamixer --get-volume) 'Volume (Muted)'; else dunstify -t 1000 -r 991049 -h int:value:$(pamixer --get-volume) 'Volume'; fi"
bindsym XF86AudioMute exec --no-startup-id "pamixer -t && if pamixer --get-mute | grep -q 'true'; then dunstify -t 1000 -r 991049 'Muted'; else dunstify -t 1000 -r 991049 -h int:value:$(pamixer --get-volume) 'Volume'; fi"

# Media controls
bindsym XF86AudioPlay exec --no-startup-id "playerctl play-pause"

# Print assignation
bindsym Print exec --no-startup-id "flameshot gui"

# Brightness controls with notifications
bindsym XF86MonBrightnessUp exec --no-startup-id "brightnessctl set +10% && dunstify -t 1000 -r 991050 -h int:value:$(brightnessctl -m | cut -d, -f4 | tr -d '%') 'Brightness'"
bindsym XF86MonBrightnessDown exec --no-startup-id "brightnessctl set 10%- && dunstify -t 1000 -r 991050 -h int:value:$(brightnessctl -m | cut -d, -f4 | tr -d '%') 'Brightness'"

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Move tiling windows via drag & drop by left-clicking into the title bar,
# or left-clicking anywhere into the window while holding the floating modifier.
tiling_drag modifier titlebar

# Theme toggle
bindsym $mod+Shift+z exec ~/.scripts/theme-toggle

# Start a terminal
bindsym $mod+l exec wezterm

# Kill focused window
bindsym $mod+Shift+d kill

# App launcher
bindsym $mod+Shift+Ctrl+u exec --no-startup-id rofi -show drun

# Clipboard menu
bindsym $mod+Shift+Ctrl+m exec CM_LAUNCHER=rofi clipmenu

# Change focus
bindsym $mod+i focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+o focus right

# Move focused window
bindsym $mod+Shift+i move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+o move right

# Toggle orientation
bindsym $mod+v split toggle

# Enter fullscreen mode for the focused container
bindsym $mod+Shift+f fullscreen toggle

# Change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+d layout tabbed
bindsym $mod+f layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+c floating toggle

# Change focus between tiling / floating windows
bindsym $mod+c focus mode_toggle

# Focus the parent container
bindsym $mod+comma focus parent

# Focus the child container
bindsym $mod+period focus child

# Define names for default workspaces for which we configure key bindings later on.
# We use variables to avoid repeating the names in multiple places.
set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"

# Switch to workspace
bindsym $mod+w workspace number $ws1
bindsym $mod+e workspace number $ws2
bindsym $mod+r workspace number $ws3
bindsym $mod+t workspace number $ws4

# Move focused container to workspace
bindsym $mod+Shift+w move container to workspace number $ws1
bindsym $mod+Shift+e move container to workspace number $ws2
bindsym $mod+Shift+r move container to workspace number $ws3
bindsym $mod+Shift+t move container to workspace number $ws4

# Go to most recent workspace
bindsym $mod+n workspace back_and_forth

# resize window
mode "resize" {
   bindsym i resize grow width 10 px or 10 ppt
   bindsym o resize shrink width 10 px or 10 ppt
   bindsym j resize shrink height 10 px or 10 ppt
   bindsym k resize grow height 10 px or 10 ppt

   bindsym Return mode "default"
   bindsym Escape mode "default"
   bindsym $mod+Shift+m mode "default"
}

bindsym $mod+Shift+m mode "resize"

# Reload the configuration file (reload restart exit)
# bindsym $mod+Shift+s restart

# Start i3bar to display a workspace bar 
# bar {
#     status_command i3status
#     position bottom
# }
